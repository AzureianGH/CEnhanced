module Test.TemplateGenerics;

hide fun max<T0: integral>(T0 a, T0 b) -> T0
{
    if (a > b)
        ret a;
    ret b;
}

hide fun default_max<T0: i32>(T0 a, T0 b) -> T0
{
    ret max(a, b);
}

hide fun mix<T0: integral, T1: integral>(T0 a, T1 b) -> i32
{
    ret (a as i32) + (b as i32);
}

expose fun main() -> i32
{
    i32 best = max<i32>(-5, 3);
    if (best != 3)
        ret 1;

    i64 longest = max(10 as i64, 2 as i64);
    if (longest != 10)
        ret 2;

    i32 fallback = default_max(7, 2);
    if (fallback != 7)
        ret 3;

    i32 mixed = mix(4 as u8, 6 as i16);
    if (mixed != 10)
        ret 4;

    ret 0;
}
