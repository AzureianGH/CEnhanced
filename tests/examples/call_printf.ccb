ccbytecode 2

.extern printf params=(ptr) returns=i32 varargs
.extern write params=(i32,ptr,i32) returns=i32
.extern read params=(i32,ptr,i32) returns=i32
.extern malloc params=(i32) returns=ptr
.extern free params=(ptr) returns=void
.extern exit params=(i32) returns=void
.extern test params=() returns=i32
.extern test_chance params=() returns=i32

.global Test_Program_total_test_count type=i32 init=0
.global Test_Program_globalElement type=u8 size=44 align=8
.func Test_Program_inlined_function ret=i32 params=1 locals=0
.params i32
  load_param 0
  const i32 1
  binop add i32
  ret
.endfunc
.func Test_Program_printwrapper ret=i32 params=0 locals=1
.locals ptr
  const_str "printwrapper"
  store_local 0
  load_local 0
  const_str "printwrapper"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "__FUNCTION__ matches printwrapper"
  call Test_Program_assert void (i1,ptr)
  const_str "Hello, %s! Number: %d\x0A"
  const_str "CHance"
  const i32 42
  call printf i32 (ptr,ptr,i32)
  ret
.endfunc
.func Test_Program_assert ret=void params=2 locals=0
.params i1 ptr
  load_param 0
  const i1 0
  compare ne i1
  branch if_true0 if_false1
label if_true0
  const_str "TEST PASSED: %s\x0A"
  load_param 1
  call printf i32 (ptr,ptr)
  drop i32
  jump if_end2
label if_false1
  const_str "TEST FAIL: %s\x0A"
  load_param 1
  call printf i32 (ptr,ptr)
  drop i32
  call Test_Program_abort void ()
label if_end2
  ret void
.endfunc
.func main ret=i32 params=0 locals=100
.locals ptr i1 i32 i32 i32 ptr i8 i8 i8 ptr i16 u8 i32 i32 i32 ptr u8 i32 ptr ptr ptr i32 ptr ptr ptr ptr ptr i32 u8 ptr ptr i32 u8 ptr i32 i32 i32 i32 f32 f64 ptr f32 i32 f64 f64 f64 f64 f32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 u16 ptr i32 u16 i32 i8 ptr ptr i32 ptr ptr i32 i32 i32 ptr i32 ptr i64 i64 i64 i64 i64 ptr i32 ptr ptr ptr i32 i32 ptr ptr i32 ptr i32 i32 i32 i32 i32 ptr ptr ptr
  const ptr null
  store_local 0
  const i32 128
  call Std_Memory_alloc ptr (i32)
  store_local 0
  load_local 0
  drop ptr
  load_local 0
  const ptr null
  compare ne ptr
  const_str "\0buf\0 allocation"
  call Test_Program_assert void (i1,ptr)
  load_local 0
  const u8 0
  const i32 128
  call Std_Memory_memset ptr (ptr,u8,i32)
  drop ptr
  const i1 1
  store_local 1
  const i32 0
  store_local 2
label while_cond0
  load_local 2
  const i32 128
  compare lt i32
  const i1 0
  compare ne i1
  branch while_body1 while_end2
label while_body1
  load_local 0
  convert bitcast ptr i64
  load_local 2
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  const i32 0
  compare ne i32
  const i1 0
  compare ne i1
  branch if_true4 if_end5
label if_true4
  const i1 0
  store_local 1
  load_local 1
  drop i1
label if_end5
label while_post3
  load_local 2
  const i32 1
  binop add i32
  store_local 2
  load_local 2
  drop i32
  jump while_cond0
label while_end2
  load_local 1
  const_str "memset to zero"
  call Test_Program_assert void (i1,ptr)
  const i32 1
  const_str "What's your name? > "
  const i32 20
  call write i32 (i32,ptr,i32)
  drop i32
  const i32 0
  load_local 0
  const i32 127
  call read i32 (i32,ptr,i32)
  store_local 3
  call Test_Program_printwrapper i32 ()
  store_local 4
  load_local 4
  const i32 26
  compare eq i32
  const_str "printwrapper printed length"
  call Test_Program_assert void (i1,ptr)
  load_local 0
  store_local 5
  load_local 3
  const i32 0
  compare gt i32
  const i1 0
  compare ne i1
  branch if_true6 if_false7
label if_true6
  load_local 5
  convert bitcast ptr i64
  load_local 3
  const i32 1
  binop sub i32
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i8 10
  convert sext i8 i32
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true9 if_end10
label if_true9
  load_local 5
  convert bitcast ptr i64
  load_local 3
  const i32 1
  binop sub i32
  store_local 3
  load_local 3
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  convert trunc i32 i8
  store_local 6
  load_local 6
  store_indirect i8
  load_local 6
  convert sext i8 i32
  drop i32
label if_end10
  load_local 3
  const i32 0
  compare gt i32
  const i1 0
  compare ne i1
  branch land_rhs11 land_false12
label land_rhs11
  load_local 5
  convert bitcast ptr i64
  load_local 3
  const i32 1
  binop sub i32
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i8 13
  convert sext i8 i32
  compare eq i32
  const i1 0
  compare ne i1
  branch land_true13 land_false12
label land_true13
  const i32 1
  jump land_end14
label land_false12
  const i32 0
label land_end14
  const i1 0
  compare ne i1
  branch if_true15 if_end16
label if_true15
  load_local 5
  convert bitcast ptr i64
  load_local 3
  const i32 1
  binop sub i32
  store_local 3
  load_local 3
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  convert trunc i32 i8
  store_local 7
  load_local 7
  store_indirect i8
  load_local 7
  convert sext i8 i32
  drop i32
label if_end16
  jump if_end8
label if_false7
  const_str "No input read, using empty string\x0A"
  call printf i32 (ptr)
  drop i32
  load_local 5
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  convert trunc i32 i8
  store_local 8
  load_local 8
  store_indirect i8
  load_local 8
  convert sext i8 i32
  drop i32
label if_end8
  load_local 5
  call Std_String_strlen i32 (ptr)
  load_local 3
  compare eq i32
  const_str "strlen matches bytes read"
  call Test_Program_assert void (i1,ptr)
  const_str "CHance"
  store_local 9
  load_local 5
  load_local 9
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true17 if_false18
label if_true17
  const i1 1
  const_str "User entered the secret name"
  call Test_Program_assert void (i1,ptr)
  jump if_end19
label if_false18
  const i1 1
  const_str "User did not enter the secret name (not required for tests)"
  call Test_Program_assert void (i1,ptr)
label if_end19
  const_str "Freeing memory...\x0A"
  call printf i32 (ptr)
  drop i32
  load_local 0
  call Std_Memory_dealloc void (ptr)
  call Test_Program_test_overflow i16 ()
  store_local 10
  const_str "test_overflow result: %d\x0A"
  load_local 10
  call printf i32 (ptr,i16)
  drop i32
  load_local 10
  convert sext i16 i32
  const i32 0
  const i32 25536
  binop sub i32
  compare eq i32
  const_str "test_overflow result is -25536"
  call Test_Program_assert void (i1,ptr)
  call Test_Program_test_mul_overflow u8 ()
  store_local 11
  load_local 11
  convert zext u8 i32
  const i32 64
  compare eq i32
  const_str "test_mul_overflow result is 64"
  call Test_Program_assert void (i1,ptr)
  const i32 6
  const i32 7
  binop mul i32
  store_local 12
  load_local 12
  const i32 42
  compare eq i32
  const_str "6 * 7 == 42"
  call Test_Program_assert void (i1,ptr)
  const i32 20
  const i32 0
  const i32 4
  binop sub i32
  binop div i32
  store_local 13
  load_local 13
  const i32 0
  const i32 5
  binop sub i32
  compare eq i32
  const_str "20 / -4 == -5"
  call Test_Program_assert void (i1,ptr)
  const i32 20
  const i32 6
  binop mod i32
  store_local 14
  load_local 14
  const i32 2
  compare eq i32
  const_str "20 % 6 == 2"
  call Test_Program_assert void (i1,ptr)
  const i32 255
  const i32 255
  compare eq i32
  const_str "0xFF == 255"
  call Test_Program_assert void (i1,ptr)
  const_str "Calling test_chance(): %d\x0A"
  call Test_Chance_test_chance i32 ()
  call printf i32 (ptr,i32)
  drop i32
  const_str "Calling extended C function test(): %d\x0A"
  call test i32 ()
  call printf i32 (ptr,i32)
  drop i32
  stack_alloc 5 8
  store_local 15
  load_local 15
  const i32 0
  store_indirect i32
  load_local 15
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 0
  store_indirect u8
  load_local 15
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 3
  store_local 16
  load_local 16
  store_indirect u8
  load_local 16
  drop u8
  load_local 15
  const i32 44
  store_local 17
  load_local 17
  store_indirect i32
  load_local 17
  drop i32
  stack_alloc 5 8
  store_local 18
  load_local 18
  const i32 0
  store_indirect i32
  load_local 18
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 0
  store_indirect u8
  load_local 18
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 123
  store_indirect u8
  load_local 18
  const i32 333
  store_indirect i32
  load_local 15
  store_local 19
  stack_alloc 5 8
  store_local 20
  load_local 20
  load_local 19
  load_indirect i32
  store_indirect i32
  load_local 20
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_local 19
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  store_indirect u8
  load_local 20
  load_indirect i32
  const i32 44
  compare eq i32
  const_str "deref.testVar == 44"
  call Test_Program_assert void (i1,ptr)
  const i32 123
  store_local 21
  addr_local 21
  store_local 22
  addr_local 22
  store_local 23
  load_local 23
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect ptr
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i32
  const i32 123
  compare eq i32
  const_str "double pointer deref == 123"
  call Test_Program_assert void (i1,ptr)
  const i32 5
  const i32 2
  binop mul i32
  call Std_Memory_alloc ptr (i32)
  store_local 24
  load_local 24
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 5
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  store_local 25
  call Test_Program_construct_thing ptr ()
  store_local 26
  load_local 26
  load_indirect i32
  store_local 27
  load_local 25
  load_local 27
  store_indirect i32
  load_local 26
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  store_local 28
  load_local 25
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_local 28
  store_indirect u8
  load_local 25
  drop ptr
  load_local 24
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 5
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  store_local 29
  load_local 18
  store_local 30
  load_local 30
  load_indirect i32
  store_local 31
  load_local 29
  load_local 31
  store_indirect i32
  load_local 30
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  store_local 32
  load_local 29
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_local 32
  store_indirect u8
  load_local 29
  drop ptr
  load_local 24
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 5
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  const i32 5
  compare eq i32
  const_str "addptr[0].smallValue == 5"
  call Test_Program_assert void (i1,ptr)
  load_local 24
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 5
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  const i32 123
  compare eq i32
  const_str "addptr[1].smallValue == 123"
  call Test_Program_assert void (i1,ptr)
  load_local 24
  call Std_Memory_dealloc void (ptr)
  load_local 19
  store_local 33
  const_str "testVar via intptr: %p\x0A"
  load_local 33
  call printf i32 (ptr,ptr)
  drop i32
  const i32 3
  store_local 34
  load_local 19
  const i32 45
  store_local 35
  load_local 35
  store_indirect i32
  load_local 35
  drop i32
  load_local 19
  load_indirect i32
  const i32 45
  compare eq i32
  const_str "setter/getter via => works"
  call Test_Program_assert void (i1,ptr)
  const i32 1
  const i32 1
  binop shl i32
  store_local 36
  load_local 36
  const i32 2
  compare eq i32
  const_str "1 << 1 == 2"
  call Test_Program_assert void (i1,ptr)
  const i32 4
  const i32 1
  binop shr i32
  store_local 37
  load_local 37
  const i32 2
  compare eq i32
  const_str "4 >> 1 == 2"
  call Test_Program_assert void (i1,ptr)
  const_str "typeof() = %s with sizeof() = %d\x0A"
  const_str "Test.Chance.SmallTest::struct"
  const i32 5
  call printf i32 (ptr,ptr,i32)
  drop i32
  call differentsig void ()
  call differentsig void ()
  const i32 10
  call Test_Program_rawthing i32 (i32)
  const i32 466
  compare eq i32
  const_str "rawthing(10) == 466"
  call Test_Program_assert void (i1,ptr)
  const_str "Result from LibTest: %d\x0A"
  const i32 41
  call LibTest_test_fun i32 (i32)
  call printf i32 (ptr,i32)
  drop i32
  const_str "Result from LibTest.Another: %d\x0A"
  const i32 50
  call LibTest_Another_other_test_fun i32 (i32)
  call printf i32 (ptr,i32)
  drop i32
  const f32 3.1400001
  store_local 38
  const f64 1.2345678899999999
  store_local 39
  addr_local 38
  store_local 40
  load_local 40
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const f32 6.28000021
  store_local 41
  load_local 41
  store_indirect f32
  load_local 41
  drop f32
  const i32 4
  store_local 42
  load_local 42
  const i32 4
  compare eq i32
  const_str "ac == 4"
  call Test_Program_assert void (i1,ptr)
  load_local 40
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect f32
  const f32 6.28000021
  compare eq f32
  const_str "floatptr[0] == 6.28f"
  call Test_Program_assert void (i1,ptr)
  load_local 39
  const f64 1.2345678899999999
  compare eq f64
  const_str "doubleval == 1.23456789"
  call Test_Program_assert void (i1,ptr)
  const_str "Expect addition of doubleval + floatval = %lf\x0A"
  load_local 39
  load_local 38
  convert bitcast f32 f64
  binop add f64
  call printf i32 (ptr,f64)
  drop i32
  load_local 39
  load_local 38
  convert bitcast f32 f64
  binop add f64
  store_local 43
  load_local 43
  const f64 7.5145679999999997
  binop sub f64
  store_local 44
  load_local 44
  const f64 0.0
  compare lt f64
  const i1 0
  compare ne i1
  branch if_true20 if_end21
label if_true20
  const f64 0.0
  load_local 44
  binop sub f64
  store_local 44
  load_local 44
  drop f64
label if_end21
  load_local 44
  const f64 9.9999999999999995e-07
  compare lt f64
  const_str "doubleval + floatval ~= 7.514568"
  call Test_Program_assert void (i1,ptr)
  load_local 15
  load_indirect i32
  load_local 18
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  binop add i32
  const i32 168
  compare eq i32
  const_str "Sum of vari.testVar and another.smallValue == 168"
  call Test_Program_assert void (i1,ptr)
  const f64 0.1234567
  store_local 45
  const f64 0.10000000000000001
  store_local 46
  const f32 0.100000001
  store_local 47
  load_local 46
  const f64 0.10000000000000001
  compare eq f64
  const i1 0
  compare ne i1
  branch land_rhs22 land_false23
label land_rhs22
  load_local 47
  const f32 0.100000001
  compare eq f32
  const i1 0
  compare ne i1
  branch land_true24 land_false23
label land_true24
  const i32 1
  jump land_end25
label land_false23
  const i32 0
label land_end25
  const i1 0
  compare ne i1
  branch land_rhs26 land_false27
label land_rhs26
  load_local 45
  const f64 0.1234567
  compare eq f64
  const i1 0
  compare ne i1
  branch land_true28 land_false27
label land_true28
  const i32 1
  jump land_end29
label land_false27
  const i32 0
label land_end29
  const_str "f128, f64, f32 assignments"
  call Test_Program_assert void (i1,ptr)
  load_local 15
  load_indirect i32
  load_local 18
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  binop add i32
  store_local 48
  load_local 48
  const i32 168
  compare eq i32
  const_str "final return value equals 168"
  call Test_Program_assert void (i1,ptr)
  const i32 12
  const i32 10
  binop and i32
  store_local 49
  load_local 49
  const i32 8
  compare eq i32
  const_str "Bitwise AND works"
  call Test_Program_assert void (i1,ptr)
  const i32 12
  const i32 10
  binop or i32
  store_local 50
  load_local 50
  const i32 14
  compare eq i32
  const_str "Bitwise OR works"
  call Test_Program_assert void (i1,ptr)
  const i32 12
  const i32 10
  binop xor i32
  store_local 51
  load_local 51
  const i32 6
  compare eq i32
  const_str "Bitwise XOR works"
  call Test_Program_assert void (i1,ptr)
  const i32 15
  unop bitnot i32
  store_local 52
  load_local 52
  const i32 0
  const i32 16
  binop sub i32
  compare eq i32
  const_str "Bitwise NOT works"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  store_local 53
  const i32 0
  store_local 54
label while_cond30
  load_local 54
  const i32 10
  compare lt i32
  const i1 0
  compare ne i1
  branch while_body31 while_end32
label while_body31
  load_local 54
  const i32 5
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true34 if_end35
label if_true34
  jump while_end32
label if_end35
  load_local 53
  const i32 1
  binop add i32
  store_local 53
  load_local 53
  drop i32
label while_post33
  load_local 54
  const i32 1
  binop add i32
  store_local 54
  load_local 54
  drop i32
  jump while_cond30
label while_end32
  load_local 53
  const i32 5
  compare eq i32
  const_str "break exits for-loop early"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  store_local 55
  const i32 0
  store_local 56
label while_cond36
  load_local 56
  const i32 6
  compare lt i32
  const i1 0
  compare ne i1
  branch while_body37 while_end38
label while_body37
  load_local 56
  const i32 2
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true40 if_end41
label if_true40
  jump while_post39
label if_end41
  load_local 55
  load_local 56
  binop add i32
  store_local 55
  load_local 55
  drop i32
label while_post39
  load_local 56
  const i32 1
  binop add i32
  store_local 56
  load_local 56
  drop i32
  jump while_cond36
label while_end38
  load_local 55
  const i32 0
  const i32 1
  binop add i32
  const i32 3
  binop add i32
  const i32 4
  binop add i32
  const i32 5
  binop add i32
  compare eq i32
  const_str "continue skips iteration but still advances for-loop"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  store_local 57
  const i32 0
  store_local 58
label while_cond42
  load_local 58
  const i32 6
  compare lt i32
  const i1 0
  compare ne i1
  branch while_body43 while_end44
label while_body43
  load_local 58
  const i32 1
  binop add i32
  store_local 58
  load_local 58
  drop i32
  load_local 58
  const i32 2
  binop mod i32
  const i32 0
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true45 if_end46
label if_true45
  jump while_cond42
label if_end46
  load_local 57
  load_local 58
  binop add i32
  store_local 57
  load_local 57
  drop i32
  load_local 58
  const i32 5
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true47 if_end48
label if_true47
  jump while_end44
label if_end48
  jump while_cond42
label while_end44
  load_local 57
  const i32 1
  const i32 3
  binop add i32
  const i32 5
  binop add i32
  compare eq i32
  const_str "break and continue cooperate in while-loop"
  call Test_Program_assert void (i1,ptr)
  const u16 12345
  store_local 59
  const i32 17
  call Std_Memory_alloc ptr (i32)
  store_local 60
  load_local 60
  const u8 0
  const i32 17
  call Std_Memory_memset ptr (ptr,u8,i32)
  drop ptr
  const i32 15
  store_local 61
label while_cond49
  load_local 61
  const i32 0
  compare ge i32
  const i1 0
  compare ne i1
  branch while_body50 while_end51
label while_body50
  load_local 59
  load_local 61
  binop shr u16 unsigned
  const u16 1
  binop and u16
  store_local 62
  load_local 60
  convert bitcast ptr i64
  const i32 15
  load_local 61
  binop sub i32
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_local 62
  convert zext u16 i32
  const i32 1
  compare eq i32
  const i1 0
  compare ne i1
  branch cond_true53 cond_false54
label cond_true53
  const i32 49
  store_local 63
  jump cond_end55
label cond_false54
  const i32 48
  store_local 63
label cond_end55
  load_local 63
  convert trunc i32 i8
  store_local 64
  load_local 64
  store_indirect i8
  load_local 64
  convert sext i8 i32
  drop i32
label while_post52
  load_local 61
  const i32 1
  binop sub i32
  store_local 61
  load_local 61
  drop i32
  jump while_cond49
label while_end51
  load_local 60
  const_str "0011000000111001"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "Bitwise representation of 12345 is correct"
  call Test_Program_assert void (i1,ptr)
  const i32 99
  const i32 99
  compare eq i32
  const_str "object-like macro expands to literal"
  call Test_Program_assert void (i1,ptr)
  const i32 20
  const i32 22
  binop add i32
  const i32 42
  compare eq i32
  const_str "function-style macro expansion works"
  call Test_Program_assert void (i1,ptr)
  const i32 5
  const i32 5
  binop mul i32
  const i32 25
  compare eq i32
  const_str "macro arguments stay parenthesized"
  call Test_Program_assert void (i1,ptr)
  const i32 99
  const i32 99
  compare eq i32
  const_str "#if/#else branch selection works"
  call Test_Program_assert void (i1,ptr)
  const i32 30
  const i32 30
  compare eq i32
  const_str "#elif branch selection works"
  call Test_Program_assert void (i1,ptr)
  const i32 456
  const i32 456
  compare eq i32
  const_str "#undef clears definitions for guards"
  call Test_Program_assert void (i1,ptr)
  const i32 1
  const i32 1
  compare eq i32
  const_str "__CHANCE__ builtin defined"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  const i32 0
  compare eq i32
  const_str "major version under 1"
  call Test_Program_assert void (i1,ptr)
  const i32 6
  const i32 6
  compare ge i32
  const_str "minor version reflects progress"
  call Test_Program_assert void (i1,ptr)
  const i32 1
  const i32 1
  compare ge i32
  const_str "patch version set"
  call Test_Program_assert void (i1,ptr)
  const i32 601
  const i32 0
  const i32 10000
  binop mul i32
  const i32 6
  const i32 100
  binop mul i32
  binop add i32
  const i32 1
  binop add i32
  compare eq i32
  const_str "aggregate version matches components"
  call Test_Program_assert void (i1,ptr)
  const_str "0.6.1"
  const_str "0.6.1"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "string version matches 0.6.1"
  call Test_Program_assert void (i1,ptr)
  const i32 64
  const i32 8
  const i32 8
  binop mul i32
  compare eq i32
  const_str "__POINTER_WIDTH__ matches sizeof(void*)"
  call Test_Program_assert void (i1,ptr)
  const i32 8
  const i32 8
  compare eq i32
  const i1 0
  compare ne i1
  branch if_true56 if_false57
label if_true56
  const i32 1
  const i32 1
  compare eq i32
  const_str "__IS64BIT__ reflects 64-bit"
  call Test_Program_assert void (i1,ptr)
  jump if_end58
label if_false57
  const i32 1
  const i32 0
  compare eq i32
  const_str "__IS64BIT__ reflects non-64-bit"
  call Test_Program_assert void (i1,ptr)
label if_end58
  const i32 1
  const i32 1
  compare eq i32
  const_str "__LINUX__ macro active"
  call Test_Program_assert void (i1,ptr)
  const_str "tests/examples/call_printf.ce"
  store_local 65
  load_local 65
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  const_str "__FILE__ yields non-empty value"
  call Test_Program_assert void (i1,ptr)
  const_str "Test.Program"
  store_local 66
  load_local 66
  const_str "Test.Program"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "__MODULE__ matches module name"
  call Test_Program_assert void (i1,ptr)
  const i32 389
  store_local 67
  load_local 67
  const i32 0
  compare gt i32
  const_str "__LINE__ yields positive value"
  call Test_Program_assert void (i1,ptr)
  const_str "Nov 12 2025"
  store_local 68
  load_local 68
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  const_str "__DATE__ yields non-empty value"
  call Test_Program_assert void (i1,ptr)
  const_str "00:27:16"
  store_local 69
  load_local 69
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  const_str "__TIME__ yields non-empty value"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  store_local 70
  const i32 1
  store_local 71
  load_local 71
  load_local 70
  const i32 1
  binop add i32
  compare eq i32
  const_str "__COUNTER__ increments sequentially"
  call Test_Program_assert void (i1,ptr)
  const_str "main"
  const_str "main"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "__FUNCTION__ matches main"
  call Test_Program_assert void (i1,ptr)
  const_str "helloworld"
  const_str "helloworld"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "constant string merging"
  call Test_Program_assert void (i1,ptr)
  call LibTest_Another_get_info ptr ()
  const_str "LibTest.Another::get_info()"
  call Test_Program_strcmp i32 (ptr,ptr)
  const i32 0
  compare eq i32
  const_str "LibTest.Another::get_info() works"
  call Test_Program_assert void (i1,ptr)
  const i32 5
  const i32 12345
  const i32 10
  const i32 20
  const i32 30
  const i32 40
  const i32 50
  call LibTest_Another_test_varargs i32 (i32,i32,i32,i32,i32,i32,i32)
  store_local 72
  load_local 72
  const i32 150
  compare eq i32
  const_str "varargs sum is 150"
  call Test_Program_assert void (i1,ptr)
  const i32 77
  const f32 3.1400001
  convert bitcast f32 f64
  const_str "varargs test"
  call LibTest_Another_test_diffvarargs void (i32,f64,ptr)
  stack_alloc 12 8
  store_local 73
  load_local 73
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 2
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 0
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 10
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 20
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 2
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i32 30
  store_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i32
  load_local 73
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i32
  binop add i32
  load_local 73
  convert bitcast ptr i64
  const i32 2
  convert sext i32 i64
  const i64 4
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i32
  binop add i32
  store_local 74
  load_local 74
  const i32 60
  compare eq i32
  const_str "fixed array sum is 60"
  call Test_Program_assert void (i1,ptr)
  const i32 12
  const i32 4
  const i32 3
  binop mul i32
  compare eq i32
  const_str "fixed array size is correct"
  call Test_Program_assert void (i1,ptr)
  const i32 8
  const i32 4
  binop mul i32
  call Std_Memory_alloc ptr (i32)
  store_local 75
  load_local 75
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i64 100
  store_local 76
  load_local 76
  store_indirect i64
  load_local 76
  drop i64
  load_local 75
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i64 200
  store_local 77
  load_local 77
  store_indirect i64
  load_local 77
  drop i64
  load_local 75
  convert bitcast ptr i64
  const i32 2
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i64 300
  store_local 78
  load_local 78
  store_indirect i64
  load_local 78
  drop i64
  load_local 75
  convert bitcast ptr i64
  const i32 3
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  const i64 400
  store_local 79
  load_local 79
  store_indirect i64
  load_local 79
  drop i64
  load_local 75
  convert bitcast ptr i64
  const i32 0
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i64
  load_local 75
  convert bitcast ptr i64
  const i32 1
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i64
  binop add i64
  load_local 75
  convert bitcast ptr i64
  const i32 2
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i64
  binop add i64
  load_local 75
  convert bitcast ptr i64
  const i32 3
  convert sext i32 i64
  const i64 8
  binop mul i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i64
  binop add i64
  store_local 80
  load_local 80
  const i32 1000
  convert sext i32 i64
  compare eq i64
  const_str "dynamic array sum is 1000"
  call Test_Program_assert void (i1,ptr)
  load_local 75
  call Std_Memory_dealloc void (ptr)
  stack_alloc 5 8
  store_local 81
  load_local 81
  const i32 0
  store_indirect i32
  load_local 81
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 0
  store_indirect u8
  load_local 81
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 9
  store_indirect u8
  load_local 81
  const i32 81
  store_indirect i32
  load_local 81
  call Test_Program_passbystruct i32 (ptr)
  store_local 82
  load_local 82
  const i32 81
  compare eq i32
  const_str "passbystruct result is 81"
  call Test_Program_assert void (i1,ptr)
  stack_alloc 5 8
  store_local 83
  load_local 83
  load_local 81
  call Test_Program_returnbystruct ptr (ptr)
  load_indirect i32
  store_indirect i32
  load_local 83
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_local 81
  call Test_Program_returnbystruct ptr (ptr)
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  store_indirect u8
  load_local 83
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  load_indirect u8
  convert zext u8 i32
  const i32 9
  compare eq i32
  const i1 0
  compare ne i1
  branch land_rhs59 land_false60
label land_rhs59
  load_local 83
  load_indirect i32
  const i32 81
  compare eq i32
  const i1 0
  compare ne i1
  branch land_true61 land_false60
label land_true61
  const i32 1
  jump land_end62
label land_false60
  const i32 0
label land_end62
  const_str "returnbystruct result matches input"
  call Test_Program_assert void (i1,ptr)
  addr_global Test_Program_funptr_test
  store_local 84
  addr_global Test_Program_funptr_test
  store_local 85
  const i32 15
  const i32 27
  load_local 84
  call_indirect i32 (i32,i32)
  store_local 86
  load_local 86
  const i32 42
  compare eq i32
  const_str "funptr_test result is 42"
  call Test_Program_assert void (i1,ptr)
  const i32 20
  const i32 22
  load_local 85
  call_indirect i32 (i32,i32)
  store_local 87
  load_local 87
  const i32 42
  compare eq i32
  const_str "funptr_test result via second pointer is 42"
  call Test_Program_assert void (i1,ptr)
  load_local 84
  store_local 88
  load_local 88
  const ptr null
  compare ne ptr
  const_str "raw function pointer is not null"
  call Test_Program_assert void (i1,ptr)
  load_local 88
  store_local 89
  const i32 7
  const i32 35
  load_local 89
  call_indirect i32 (i32,i32)
  store_local 90
  load_local 90
  const i32 42
  compare eq i32
  const_str "funptr_test result via raw pointer is 42"
  call Test_Program_assert void (i1,ptr)
  addr_global Test_Program_passbystruct
  store_local 91
  load_local 81
  load_local 91
  call_indirect i32 (ptr)
  store_local 92
  load_local 92
  const i32 81
  compare eq i32
  const_str "struct funptr result is 81"
  call Test_Program_assert void (i1,ptr)
  const i32 12
  store_local 93
  load_local 93
  const i32 0
  compare eq i32
  const i1 0
  compare ne i1
  branch cond_true63 cond_false64
label cond_true63
  const i32 0
  store_local 94
  jump cond_end65
label cond_false64
  load_local 93
  load_local 93
  call Test_Program_inlined_function i32 (i32)
  binop mul i32
  store_local 94
label cond_end65
  load_local 94
  const i32 156
  compare eq i32
  const_str "inlinable_function(12) == 156"
  call Test_Program_assert void (i1,ptr)
  const i32 0
  store_local 95
  load_local 95
  const i32 0
  compare eq i32
  const i1 0
  compare ne i1
  branch cond_true66 cond_false67
label cond_true66
  const i32 0
  store_local 96
  jump cond_end68
label cond_false67
  load_local 95
  load_local 95
  call Test_Program_inlined_function i32 (i32)
  binop mul i32
  store_local 96
label cond_end68
  load_local 96
  const i32 0
  compare eq i32
  const_str "inlinable_function(0) == 0"
  call Test_Program_assert void (i1,ptr)
  addr_global Test_Program_inlined_function
  store_local 97
  load_local 97
  store_local 98
  load_local 98
  store_local 99
  const_str "Value is %d!\x0A"
  const i32 5
  load_local 99
  call_indirect i32 (i32)
  call printf i32 (ptr,i32)
  drop i32
  const_str "Arch is %s.\x0A"
  const_str "x86"
  call printf i32 (ptr,ptr)
  drop i32
  const_str "All tests completed successfully!\x0A"
  call printf i32 (ptr)
  drop i32
  load_local 48
  ret
.endfunc
.func Test_Program_funptr_test ret=i32 params=2 locals=0
.params i32 i32
  load_param 0
  load_param 1
  binop add i32
  ret
.endfunc
.func Test_Program_passbystruct ret=i32 params=1 locals=0
.params ptr
  load_param 0
  load_indirect i32
  ret
.endfunc
.func Test_Program_returnbystruct ret=i32 params=1 locals=0
.params ptr
  load_param 0
  ret
.endfunc
.func Test_Program_construct_thing ret=i32 params=0 locals=3
.locals ptr u8 i32
  stack_alloc 5 8
  store_local 0
  load_local 0
  const i32 0
  store_indirect i32
  load_local 0
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 0
  store_indirect u8
  load_local 0
  convert bitcast ptr i64
  const i64 4
  binop add i64
  convert bitcast i64 ptr
  const u8 5
  store_local 1
  load_local 1
  store_indirect u8
  load_local 1
  drop u8
  load_local 0
  const i32 10
  store_local 2
  load_local 2
  store_indirect i32
  load_local 2
  drop i32
  load_local 0
  ret
.endfunc
.func Test_Program_strlen ret=i32 params=1 locals=2
.params ptr
.locals i32 i32
  const i32 0
  store_local 0
label while_cond0
  load_param 0
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  branch while_body1 while_end2
label while_body1
  load_local 0
  store_local 1
  load_local 0
  const i32 1
  binop add i32
  store_local 0
  load_local 1
  drop i32
  jump while_cond0
label while_end2
  load_local 0
  ret
.endfunc
.func Test_Program_strcmp ret=i32 params=2 locals=2
.params ptr ptr
.locals i32 i32
  const i32 0
  store_local 0
label while_cond0
  load_param 0
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  branch land_rhs3 land_false4
label land_rhs3
  load_param 1
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  const i32 0
  compare ne i32
  branch land_true5 land_false4
label land_true5
  const i32 1
  jump land_end6
label land_false4
  const i32 0
label land_end6
  const i1 0
  compare ne i1
  branch while_body1 while_end2
label while_body1
  load_param 0
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  load_param 1
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  compare ne i32
  const i1 0
  compare ne i1
  branch if_true7 if_end8
label if_true7
  load_param 0
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  load_param 1
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  binop sub i32
  ret
label if_end8
  load_local 0
  store_local 1
  load_local 0
  const i32 1
  binop add i32
  store_local 0
  load_local 1
  drop i32
  jump while_cond0
label while_end2
  load_param 0
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  load_param 1
  convert bitcast ptr i64
  load_local 0
  convert sext i32 i64
  binop add i64
  convert bitcast i64 ptr
  load_indirect i8
  convert sext i8 i32
  binop sub i32
  ret
.endfunc
.func Test_Program_abort ret=void params=0 locals=0
  const i32 1
  call exit void (i32)
  ret void
.endfunc
.func Test_Program_test_overflow ret=i16 params=0 locals=2
.locals i16 i16
  const i16 30000
  store_local 0
  const i16 10000
  store_local 1
  load_local 0
  load_local 1
  binop add i16
  ret
.endfunc
.func Test_Program_test_mul_overflow ret=u8 params=0 locals=2
.locals u8 u8
  const u8 200
  store_local 0
  const u8 200
  store_local 1
  load_local 0
  load_local 1
  binop mul u8
  ret
.endfunc
.func differentsig ret=void params=0 locals=0
  const_str "Hello from sigfunction!\x0A"
  call printf i32 (ptr)
  drop i32
  ret void
.endfunc
.func Test_Program_rawthing ret=i32 params=1 locals=0
.params i32
const i32 456
load_param 0
binop add i32
ret
.endfunc
